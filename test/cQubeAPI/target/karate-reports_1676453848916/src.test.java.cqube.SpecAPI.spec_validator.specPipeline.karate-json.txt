{"failedCount":1,"prefixedPath":"src\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature","packageQualifiedName":"src.test.java.cqube.SpecAPI.spec_validator.specPipeline","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature","scenarioResults":[{"sectionIndex":1,"stepResults":[{"result":{"nanos":0,"millis":0.0,"status":"passed"},"step":{"endLine":0,"line":35,"prefix":"*","index":-1,"text":"@setup"},"callResults":[{"failedCount":0,"prefixedPath":"src\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature","packageQualifiedName":"src.test.java.cqube.SpecAPI.spec_validator.specPipeline","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":33463366,"millis":33.463366,"status":"passed"},"step":{"line":6,"prefix":"*","index":0,"text":"def actual_request = read('classpath:src\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline_validator.json')"}}],"line":5,"description":"","durationMillis":33.463366,"failed":false,"tags":["setup=project","ignore"],"executorName":"main","name":"","startTime":1676453064148,"refId":"[1:5]","endTime":1676453064194,"exampleIndex":-1}],"callDepth":1,"name":"Test Spec Pipeline API","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":33.463366,"passedCount":1}]},{"result":{"nanos":707055,"millis":0.707055,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":476139,"millis":0.476139,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":1283518,"millis":1.283518,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":1021194,"millis":1.021194,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":5972411,"millis":5.972411,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":1319783,"millis":1.319783,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":335491,"millis":0.335491,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":277191,"millis":0.277191,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":784027,"millis":0.784027,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":5308954,"millis":5.308954,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:24.230 [print] invalid \n"},{"result":{"nanos":1497935,"millis":1.497935,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:24.233 [print] must have required property 'pipeline_name' \n"},{"result":{"nanos":2406688,"millis":2.406688,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:24.235 [print] {\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":267203,"millis":0.267203,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1259112984,"millis":1259.112984,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:24.475 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 219\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:25.473 response time in milliseconds: 982\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:25 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 181\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"b5-URyZMC36C7WiFD6gV9SYDdArhfs\"\n{\"message\":[{\"instancePath\":\"\",\"schemaPath\":\"#\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"pipeline_name\"},\"message\":\"must have required property 'pipeline_name'\"}]}\n\n"},{"result":{"nanos":10792012,"millis":10.792012,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:25.505 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\",\n      \"schemaPath\": \"#\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"pipeline_name\"\n      },\n      \"message\": \"must have required property 'pipeline_name'\"\n    }\n  ]\n}\n must have required property 'pipeline_name' \n"},{"result":{"nanos":53592865,"millis":53.592865,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":859191147,"millis":859.191147,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":815.060899,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must have required property 'pipeline_name'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1275975,"millis":1.275975,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:25.605 remove failed: null\n"},{"result":{"nanos":884983,"millis":0.884983,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:25.606 remove failed: null\n"},{"result":{"nanos":383457,"millis":0.383457,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":304738,"millis":0.304738,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":710366001,"millis":710.366001,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:25.609 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 219\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:26.272 response time in milliseconds: 652\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:26 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 181\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"b5-URyZMC36C7WiFD6gV9SYDdArhfs\"\n{\"message\":[{\"instancePath\":\"\",\"schemaPath\":\"#\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"pipeline_name\"},\"message\":\"must have required property 'pipeline_name'\"}]}\n\n"},{"result":{"nanos":13069410,"millis":13.06941,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":55926040,"millis":55.92604,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":399302,"millis":0.399302,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":493807,"millis":0.493807,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":17517471,"millis":17.517471,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":10594661,"millis":10.594661,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":2460075,"millis":2.460075,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":1694027,"millis":1.694027,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":33.159343,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453066353,"refId":"[3:24]","endTime":1676453066386,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":33.159343,"passedCount":1}]},{"result":{"nanos":3654048,"millis":3.654048,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":2826657,"millis":2.826657,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":6677827,"millis":6.677827,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":18641792,"millis":18.641792,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1049971,"millis":1.049971,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":815.060899,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453065603,"refId":"[1:3]","endTime":1676453066420,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":2204.346597,"failed":false,"executorName":"main","name":"Verify the Spec pipeline with removing pipeline_name from request body ","startTime":1676453064205,"refId":"[2.1:35]","endTime":1676453066420,"exampleData":{"pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":0},{"sectionIndex":1,"stepResults":[{"result":{"nanos":699315,"millis":0.699315,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":815774,"millis":0.815774,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":1905114,"millis":1.905114,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":1396181,"millis":1.396181,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":298385,"millis":0.298385,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":184386,"millis":0.184386,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":169392,"millis":0.169392,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":182891,"millis":0.182891,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":543680,"millis":0.54368,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1223704,"millis":1.223704,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:26.434 [print] invalid \n"},{"result":{"nanos":1444667,"millis":1.444667,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:26.435 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":1251386,"millis":1.251386,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:26.437 [print] {\n  \"pipeline_name\": \"\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":190358,"millis":0.190358,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1352482341,"millis":1352.482341,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:26.438 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 238\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:27.774 response time in milliseconds: 1317\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:27 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 200\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"c8-Gp\/RIh+B5GuJI4bPTRGWZyYKC6c\"\n{\"message\":[{\"instancePath\":\"\/pipeline_name\",\"schemaPath\":\"#\/properties\/pipeline_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":3065652,"millis":3.065652,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:27.793 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline_name\",\n      \"schemaPath\": \"#\/properties\/pipeline_name\/shouldnotnull\",\n      \"keyword\": \"shouldnotnull\",\n      \"params\": {\n      },\n      \"message\": \"must pass \\\"shouldnotnull\\\" keyword validation\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":692508,"millis":0.692508,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":1318453351,"millis":1318.453351,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":1264.565232,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1270131,"millis":1.270131,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:27.839 remove failed: null\n"},{"result":{"nanos":2449338,"millis":2.449338,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:27.841 remove failed: null\n"},{"result":{"nanos":340327,"millis":0.340327,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":271674,"millis":0.271674,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":1217560219,"millis":1217.560219,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:27.845 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 238\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:29.054 response time in milliseconds: 1202\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:28 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 200\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"c8-Gp\/RIh+B5GuJI4bPTRGWZyYKC6c\"\n{\"message\":[{\"instancePath\":\"\/pipeline_name\",\"schemaPath\":\"#\/properties\/pipeline_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":928234,"millis":0.928234,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":36616539,"millis":36.616539,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":470113,"millis":0.470113,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":508974,"millis":0.508974,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1478605,"millis":1.478605,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":2338727,"millis":2.338727,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":662906,"millis":0.662906,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":393566,"millis":0.393566,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":5.852891,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453069099,"refId":"[3:24]","endTime":1676453069106,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":5.852891,"passedCount":1}]},{"result":{"nanos":1203048,"millis":1.203048,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":349347,"millis":0.349347,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":398579,"millis":0.398579,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":1710972,"millis":1.710972,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1466824,"millis":1.466824,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":1264.565232,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453067838,"refId":"[1:3]","endTime":1676453069112,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":2684.999085,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing ingestion_name as empty string ","startTime":1676453066425,"refId":"[2.2:35]","endTime":1676453069113,"exampleData":{"pipeline_name":"","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":244134,"millis":0.244134,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":148238,"millis":0.148238,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":442495,"millis":0.442495,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":430422,"millis":0.430422,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":971598,"millis":0.971598,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":422887,"millis":0.422887,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":417783,"millis":0.417783,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":433755,"millis":0.433755,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":463605,"millis":0.463605,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":945506,"millis":0.945506,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:29.126 [print] invalid \n"},{"result":{"nanos":1015042,"millis":1.015042,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:29.127 [print] must have required property 'pipeline_type' \n"},{"result":{"nanos":1183309,"millis":1.183309,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:29.129 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":269719,"millis":0.269719,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":828852199,"millis":828.852199,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:29.132 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 247\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:29.953 response time in milliseconds: 818\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:29 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 181\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"b5-9UuWBEjxvyQD5qtrGPVVWLHL2YM\"\n{\"message\":[{\"instancePath\":\"\",\"schemaPath\":\"#\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"pipeline_type\"},\"message\":\"must have required property 'pipeline_type'\"}]}\n\n"},{"result":{"nanos":4000479,"millis":4.000479,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:29.962 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\",\n      \"schemaPath\": \"#\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"pipeline_type\"\n      },\n      \"message\": \"must have required property 'pipeline_type'\"\n    }\n  ]\n}\n must have required property 'pipeline_type' \n"},{"result":{"nanos":720225,"millis":0.720225,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":743261206,"millis":743.261206,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":702.274822,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must have required property 'pipeline_type'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2342081,"millis":2.342081,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:30.004 remove failed: null\n"},{"result":{"nanos":3026834,"millis":3.026834,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:30.007 remove failed: null\n"},{"result":{"nanos":718443,"millis":0.718443,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":602229,"millis":0.602229,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":667602506,"millis":667.602506,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:30.016 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 247\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:30.673 response time in milliseconds: 653\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:30 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 181\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"b5-9UuWBEjxvyQD5qtrGPVVWLHL2YM\"\n{\"message\":[{\"instancePath\":\"\",\"schemaPath\":\"#\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"pipeline_type\"},\"message\":\"must have required property 'pipeline_type'\"}]}\n\n"},{"result":{"nanos":855542,"millis":0.855542,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":23166783,"millis":23.166783,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":384811,"millis":0.384811,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":498162,"millis":0.498162,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1025912,"millis":1.025912,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":1214807,"millis":1.214807,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":290155,"millis":0.290155,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":229017,"millis":0.229017,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":3.642864,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453070698,"refId":"[3:24]","endTime":1676453070702,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":3.642864,"passedCount":1}]},{"result":{"nanos":176284,"millis":0.176284,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":201118,"millis":0.201118,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":298875,"millis":0.298875,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":1316261,"millis":1.316261,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1967866,"millis":1.967866,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":702.274822,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453070002,"refId":"[1:3]","endTime":1676453070706,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":1584.222602,"failed":false,"executorName":"main","name":"Verify the Spec pipeline with removing pipeline_type from request body ","startTime":1676453069120,"refId":"[2.3:35]","endTime":1676453070707,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":2},{"sectionIndex":1,"stepResults":[{"result":{"nanos":204218,"millis":0.204218,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":104385,"millis":0.104385,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":331482,"millis":0.331482,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":296338,"millis":0.296338,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":257266,"millis":0.257266,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":1027609,"millis":1.027609,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":247614,"millis":0.247614,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":184989,"millis":0.184989,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":289560,"millis":0.28956,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1137762,"millis":1.137762,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:30.717 [print] invalid \n"},{"result":{"nanos":653310,"millis":0.65331,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:30.718 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":712483,"millis":0.712483,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:30.719 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":240116,"millis":0.240116,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":685468029,"millis":685.468029,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:30.721 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 266\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:31.397 response time in milliseconds: 665\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:31 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 244\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"f4-FgLe9Xp2hdVcpcsfjtC4WZJfMAU\"\n{\"message\":[{\"instancePath\":\"\/pipeline_type\",\"schemaPath\":\"#\/properties\/pipeline_type\/enum\",\"keyword\":\"enum\",\"params\":{\"allowedValues\":[\"ingest_to_db\",\"dimension_to_db\",\"dataset_to_db\"]},\"message\":\"must be equal to one of the allowed values\"}]}\n\n"},{"result":{"nanos":8712717,"millis":8.712717,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:31.413 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline_type\",\n      \"schemaPath\": \"#\/properties\/pipeline_type\/enum\",\n      \"keyword\": \"enum\",\n      \"params\": {\n        \"allowedValues\": [\n          \"ingest_to_db\",\n          \"dimension_to_db\",\n          \"dataset_to_db\"\n        ]\n      },\n      \"message\": \"must be equal to one of the allowed values\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":555664,"millis":0.555664,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":889313200,"millis":889.3132,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":795.362329,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":962274,"millis":0.962274,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:31.502 remove failed: null\n"},{"result":{"nanos":747004,"millis":0.747004,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:31.503 remove failed: null\n"},{"result":{"nanos":136499,"millis":0.136499,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":101018,"millis":0.101018,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":709570173,"millis":709.570173,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:31.505 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 266\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:32.209 response time in milliseconds: 700\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:32 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 244\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"f4-FgLe9Xp2hdVcpcsfjtC4WZJfMAU\"\n{\"message\":[{\"instancePath\":\"\/pipeline_type\",\"schemaPath\":\"#\/properties\/pipeline_type\/enum\",\"keyword\":\"enum\",\"params\":{\"allowedValues\":[\"ingest_to_db\",\"dimension_to_db\",\"dataset_to_db\"]},\"message\":\"must be equal to one of the allowed values\"}]}\n\n"},{"result":{"nanos":4611973,"millis":4.611973,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":66878442,"millis":66.878442,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":762478,"millis":0.762478,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":5887079,"millis":5.887079,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":2707570,"millis":2.70757,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":3647889,"millis":3.647889,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":2133434,"millis":2.133434,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":5885697,"millis":5.885697,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":21.024147,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453072269,"refId":"[3:24]","endTime":1676453072291,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":21.024147,"passedCount":1}]},{"result":{"nanos":3983173,"millis":3.983173,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":1784542,"millis":1.784542,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":2058299,"millis":2.058299,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":2693299,"millis":2.693299,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1835633,"millis":1.835633,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":795.362329,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453071501,"refId":"[1:3]","endTime":1676453072304,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":1589.736742,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing pipeline_type as empty string ","startTime":1676453070712,"refId":"[2.4:35]","endTime":1676453072305,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":3},{"sectionIndex":1,"stepResults":[{"result":{"nanos":445681,"millis":0.445681,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":364210,"millis":0.36421,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":972371,"millis":0.972371,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":956594,"millis":0.956594,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":188084,"millis":0.188084,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":328527,"millis":0.328527,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":219555,"millis":0.219555,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":166895,"millis":0.166895,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":982132,"millis":0.982132,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":3415467,"millis":3.415467,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:32.330 [print] invalid \n"},{"result":{"nanos":8167510,"millis":8.16751,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:32.338 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":1927133,"millis":1.927133,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:32.340 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n  ]\n}\n \n"},{"result":{"nanos":163034,"millis":0.163034,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1097590668,"millis":1097.590668,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:32.342 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 105\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[]}\n\n14:54:33.436 response time in milliseconds: 1091\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:33 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 190\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"be-Wqg1mUTDVeIThjE8lbcS43GHCLQ\"\n{\"message\":[{\"instancePath\":\"\/pipeline\",\"schemaPath\":\"#\/properties\/pipeline\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":11794119,"millis":11.794119,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:33.450 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\",\n      \"schemaPath\": \"#\/properties\/pipeline\/shouldnotnull\",\n      \"keyword\": \"shouldnotnull\",\n      \"params\": {\n      },\n      \"message\": \"must pass \\\"shouldnotnull\\\" keyword validation\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":4376189,"millis":4.376189,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":963005418,"millis":963.005418,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":923.341735,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3865136,"millis":3.865136,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:33.495 remove failed: null\n"},{"result":{"nanos":4820183,"millis":4.820183,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:33.501 remove failed: null\n"},{"result":{"nanos":842300,"millis":0.8423,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":571483,"millis":0.571483,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":869533104,"millis":869.533104,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:33.508 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 105\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[]}\n\n14:54:34.369 response time in milliseconds: 852\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:34 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 190\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"be-Wqg1mUTDVeIThjE8lbcS43GHCLQ\"\n{\"message\":[{\"instancePath\":\"\/pipeline\",\"schemaPath\":\"#\/properties\/pipeline\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":692131,"millis":0.692131,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":39803060,"millis":39.80306,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":392714,"millis":0.392714,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":391257,"millis":0.391257,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1777379,"millis":1.777379,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":2008438,"millis":2.008438,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":327941,"millis":0.327941,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":237282,"millis":0.237282,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":5.135011,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453074407,"refId":"[3:24]","endTime":1676453074413,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":5.135011,"passedCount":1}]},{"result":{"nanos":207294,"millis":0.207294,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":228107,"millis":0.228107,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":209047,"millis":0.209047,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":1463672,"millis":1.463672,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1106218,"millis":1.106218,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":923.341735,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453073491,"refId":"[1:3]","endTime":1676453074417,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":2095.063587,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing pipeline as empty [] ","startTime":1676453072320,"refId":"[2.5:35]","endTime":1676453074419,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[]},"exampleIndex":4},{"sectionIndex":1,"stepResults":[{"result":{"nanos":172470,"millis":0.17247,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":98026,"millis":0.098026,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":261526,"millis":0.261526,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":298583,"millis":0.298583,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":161411,"millis":0.161411,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":240277,"millis":0.240277,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":192242,"millis":0.192242,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":180513,"millis":0.180513,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":278915,"millis":0.278915,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1495350,"millis":1.49535,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:34.429 [print] invalid \n"},{"result":{"nanos":1652918,"millis":1.652918,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:34.431 [print] must have required property 'transformer_name' \n"},{"result":{"nanos":2553158,"millis":2.553158,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:34.434 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n    }\n  ]\n}\n \n"},{"result":{"nanos":154110,"millis":0.15411,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":582852257,"millis":582.852257,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:34.436 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 107\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{}]}\n\n14:54:35.014 response time in milliseconds: 573\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:34 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 224\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"e0-uA2D+gy5OKwpZurg1\/DXSJ\/d7qw\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"transformer_name\"},\"message\":\"must have required property 'transformer_name'\"}]}\n\n"},{"result":{"nanos":2417890,"millis":2.41789,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:35.020 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"transformer_name\"\n      },\n      \"message\": \"must have required property 'transformer_name'\"\n    }\n  ]\n}\n must have required property 'transformer_name' \n"},{"result":{"nanos":715470,"millis":0.71547,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":1364175528,"millis":1364.175528,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":1313.142141,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{}]},"testcase_type":"invalid","exp_msg":"must have required property 'transformer_name'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2124040,"millis":2.12404,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:35.070 remove failed: null\n"},{"result":{"nanos":1744449,"millis":1.744449,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:35.073 remove failed: null\n"},{"result":{"nanos":266592,"millis":0.266592,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":104866,"millis":0.104866,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":1240562506,"millis":1240.562506,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:35.076 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 107\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{}]}\n\n14:54:36.311 response time in milliseconds: 1228\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:36 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 224\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"e0-uA2D+gy5OKwpZurg1\/DXSJ\/d7qw\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"transformer_name\"},\"message\":\"must have required property 'transformer_name'\"}]}\n\n"},{"result":{"nanos":491665,"millis":0.491665,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":61860712,"millis":61.860712,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":961434,"millis":0.961434,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":6232453,"millis":6.232453,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":4544955,"millis":4.544955,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":4447113,"millis":4.447113,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":918530,"millis":0.91853,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":1312679,"millis":1.312679,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":18.417164,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453076354,"refId":"[3:24]","endTime":1676453076376,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":18.417164,"passedCount":1}]},{"result":{"nanos":382414,"millis":0.382414,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":384592,"millis":0.384592,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":446282,"millis":0.446282,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":3359674,"millis":3.359674,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1414349,"millis":1.414349,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":1313.142141,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453075068,"refId":"[1:3]","endTime":1676453076384,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":1957.900644,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing pipeline without properties ","startTime":1676453074425,"refId":"[2.6:35]","endTime":1676453076386,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{}]},"exampleIndex":5},{"sectionIndex":1,"stepResults":[{"result":{"nanos":211401,"millis":0.211401,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":177734,"millis":0.177734,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":1979183,"millis":1.979183,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":538621,"millis":0.538621,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":225912,"millis":0.225912,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":1259092,"millis":1.259092,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":508724,"millis":0.508724,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":387238,"millis":0.387238,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":461970,"millis":0.46197,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1814498,"millis":1.814498,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:36.424 [print] invalid \n"},{"result":{"nanos":2391121,"millis":2.391121,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:36.427 [print] must have required property 'event_name' \n"},{"result":{"nanos":1679333,"millis":1.679333,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:36.429 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":172424,"millis":0.172424,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1110467840,"millis":1110.46784,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:36.431 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 237\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:37.537 response time in milliseconds: 1104\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:37 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 212\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"d4-VBrbHO4WuBvxtUCcj9ZOgY7svts\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"event_name\"},\"message\":\"must have required property 'event_name'\"}]}\n\n"},{"result":{"nanos":4467100,"millis":4.4671,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:37.544 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"event_name\"\n      },\n      \"message\": \"must have required property 'event_name'\"\n    }\n  ]\n}\n must have required property 'event_name' \n"},{"result":{"nanos":820716,"millis":0.820716,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":1323433154,"millis":1323.433154,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":1290.74265,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must have required property 'event_name'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1584245,"millis":1.584245,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:37.569 remove failed: null\n"},{"result":{"nanos":1614657,"millis":1.614657,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:37.571 remove failed: null\n"},{"result":{"nanos":304098,"millis":0.304098,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":190237,"millis":0.190237,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":1220298891,"millis":1220.298891,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:37.575 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 237\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:38.787 response time in milliseconds: 1207\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:38 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 212\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"d4-VBrbHO4WuBvxtUCcj9ZOgY7svts\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"event_name\"},\"message\":\"must have required property 'event_name'\"}]}\n\n"},{"result":{"nanos":585171,"millis":0.585171,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":53848098,"millis":53.848098,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":1145830,"millis":1.14583,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":969527,"millis":0.969527,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":2052874,"millis":2.052874,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":1937883,"millis":1.937883,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":443301,"millis":0.443301,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":478703,"millis":0.478703,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":7.028118,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453078826,"refId":"[3:24]","endTime":1676453078847,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":7.028118,"passedCount":1}]},{"result":{"nanos":450097,"millis":0.450097,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":435228,"millis":0.435228,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":416792,"millis":0.416792,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":9071354,"millis":9.071354,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1943782,"millis":1.943782,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":1290.74265,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453077567,"refId":"[1:3]","endTime":1676453078860,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":2450.996061,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing event_name  ","startTime":1676453076414,"refId":"[2.7:35]","endTime":1676453078870,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":6},{"sectionIndex":1,"stepResults":[{"result":{"nanos":275479,"millis":0.275479,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":165436,"millis":0.165436,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":425581,"millis":0.425581,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":502137,"millis":0.502137,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":365936,"millis":0.365936,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":564328,"millis":0.564328,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":366653,"millis":0.366653,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":370303,"millis":0.370303,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":540630,"millis":0.54063,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":3030683,"millis":3.030683,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:38.885 [print] invalid \n"},{"result":{"nanos":2569768,"millis":2.569768,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:38.887 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":2969585,"millis":2.969585,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:38.891 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \" \",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":224001,"millis":0.224001,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1898419573,"millis":1898.419573,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:38.894 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 254\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\" \",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:40.787 response time in milliseconds: 1889\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:39 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 231\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"e7-daE9uFJxUwfI6k0rmd5tYzOA7Zc\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/event_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/event_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":3166138,"millis":3.166138,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:40.793 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\/event_name\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/properties\/event_name\/shouldnotnull\",\n      \"keyword\": \"shouldnotnull\",\n      \"params\": {\n      },\n      \"message\": \"must pass \\\"shouldnotnull\\\" keyword validation\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":570274,"millis":0.570274,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":2071287616,"millis":2071.287616,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":2019.634968,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":" ","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2249309,"millis":2.249309,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:40.844 remove failed: null\n"},{"result":{"nanos":2193651,"millis":2.193651,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:40.846 remove failed: null\n"},{"result":{"nanos":2385432,"millis":2.385432,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":4509945,"millis":4.509945,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":1948205915,"millis":1948.205915,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:40.881 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 254\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\" \",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:42.798 response time in milliseconds: 1909\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:41 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 231\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"e7-daE9uFJxUwfI6k0rmd5tYzOA7Zc\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/event_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/event_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":696345,"millis":0.696345,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":47736702,"millis":47.736702,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":3739883,"millis":3.739883,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":2894186,"millis":2.894186,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1683448,"millis":1.683448,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":2084405,"millis":2.084405,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":508270,"millis":0.50827,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":433638,"millis":0.433638,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":11.34383,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453082837,"refId":"[3:24]","endTime":1676453082851,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":11.34383,"passedCount":1}]},{"result":{"nanos":1797695,"millis":1.797695,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":581609,"millis":0.581609,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":636970,"millis":0.63697,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":2367638,"millis":2.367638,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":6273757,"millis":6.273757,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":2019.634968,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453080841,"refId":"[1:3]","endTime":1676453082864,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":3985.814121,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing event_name  ","startTime":1676453078877,"refId":"[2.8:35]","endTime":1676453082865,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":" ","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":7},{"sectionIndex":1,"stepResults":[{"result":{"nanos":355056,"millis":0.355056,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":233351,"millis":0.233351,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":567189,"millis":0.567189,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":456661,"millis":0.456661,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":253192,"millis":0.253192,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":462276,"millis":0.462276,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":377588,"millis":0.377588,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":266422,"millis":0.266422,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":418702,"millis":0.418702,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1210641,"millis":1.210641,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:42.892 [print] invalid \n"},{"result":{"nanos":807704,"millis":0.807704,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:42.893 [print] must have required property 'dataset_name' \n"},{"result":{"nanos":1001775,"millis":1.001775,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:42.894 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":194365,"millis":0.194365,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1196853150,"millis":1196.85315,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:42.897 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 234\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:44.090 response time in milliseconds: 1189\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:43 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 216\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"d8-b0QqcedggTTFdO2EuNEPVNR00Lg\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"dataset_name\"},\"message\":\"must have required property 'dataset_name'\"}]}\n\n"},{"result":{"nanos":884936,"millis":0.884936,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:44.092 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"dataset_name\"\n      },\n      \"message\": \"must have required property 'dataset_name'\"\n    }\n  ]\n}\n must have required property 'dataset_name' \n"},{"result":{"nanos":377817,"millis":0.377817,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":966893236,"millis":966.893236,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":955.390378,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must have required property 'dataset_name'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":737970,"millis":0.73797,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:44.101 remove failed: null\n"},{"result":{"nanos":603568,"millis":0.603568,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:44.102 remove failed: null\n"},{"result":{"nanos":116350,"millis":0.11635,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":76629,"millis":0.076629,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":911103196,"millis":911.103196,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:44.104 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 234\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:45.011 response time in milliseconds: 902\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:44 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 216\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"d8-b0QqcedggTTFdO2EuNEPVNR00Lg\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"dataset_name\"},\"message\":\"must have required property 'dataset_name'\"}]}\n\n"},{"result":{"nanos":795995,"millis":0.795995,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":30819796,"millis":30.819796,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":631904,"millis":0.631904,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":682704,"millis":0.682704,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1851525,"millis":1.851525,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":2499104,"millis":2.499104,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":687145,"millis":0.687145,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":500186,"millis":0.500186,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":6.852568,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453085037,"refId":"[3:24]","endTime":1676453085045,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":6.852568,"passedCount":1}]},{"result":{"nanos":422960,"millis":0.42296,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":431196,"millis":0.431196,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":475235,"millis":0.475235,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":7026195,"millis":7.026195,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":2781288,"millis":2.781288,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":955.390378,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453084100,"refId":"[1:3]","endTime":1676453085058,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":2171.614061,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing dataset_name ","startTime":1676453082885,"refId":"[2.9:35]","endTime":1676453085060,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":8},{"sectionIndex":1,"stepResults":[{"result":{"nanos":334001,"millis":0.334001,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":247471,"millis":0.247471,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":445280,"millis":0.44528,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":407021,"millis":0.407021,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":304438,"millis":0.304438,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":455849,"millis":0.455849,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":317419,"millis":0.317419,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":326299,"millis":0.326299,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":454953,"millis":0.454953,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1315771,"millis":1.315771,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:45.075 [print] invalid \n"},{"result":{"nanos":1014493,"millis":1.014493,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:45.077 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":1497149,"millis":1.497149,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:45.078 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":196131,"millis":0.196131,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":807015554,"millis":807.015554,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:45.082 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 252\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:45.884 response time in milliseconds: 792\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:45 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 235\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"eb-zzwlFv4acC+Gs5\/1lMCk8L7SZz0\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/dataset_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/dataset_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":4696306,"millis":4.696306,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:45.890 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\/dataset_name\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/properties\/dataset_name\/shouldnotnull\",\n      \"keyword\": \"shouldnotnull\",\n      \"params\": {\n      },\n      \"message\": \"must pass \\\"shouldnotnull\\\" keyword validation\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":626984,"millis":0.626984,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":934128845,"millis":934.128845,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":873.207269,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1550784,"millis":1.550784,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:45.951 remove failed: null\n"},{"result":{"nanos":1362338,"millis":1.362338,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:45.953 remove failed: null\n"},{"result":{"nanos":716286,"millis":0.716286,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":369188,"millis":0.369188,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":802507200,"millis":802.5072,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:45.961 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 252\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:46.754 response time in milliseconds: 786\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:46 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 235\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"eb-zzwlFv4acC+Gs5\/1lMCk8L7SZz0\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/dataset_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/dataset_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":819775,"millis":0.819775,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":60872831,"millis":60.872831,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":548477,"millis":0.548477,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":790878,"millis":0.790878,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1891824,"millis":1.891824,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":7617826,"millis":7.617826,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":857955,"millis":0.857955,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":555327,"millis":0.555327,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":12.262287,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453086806,"refId":"[3:24]","endTime":1676453086819,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":12.262287,"passedCount":1}]},{"result":{"nanos":402159,"millis":0.402159,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":488799,"millis":0.488799,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":521914,"millis":0.521914,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":2008391,"millis":2.008391,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1587604,"millis":1.587604,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":873.207269,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453085950,"refId":"[1:3]","endTime":1676453086825,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":1753.783964,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing dataset_name  ","startTime":1676453085069,"refId":"[2.10:35]","endTime":1676453086826,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":9},{"sectionIndex":1,"stepResults":[{"result":{"nanos":242347,"millis":0.242347,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":157190,"millis":0.15719,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":1339335,"millis":1.339335,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":677712,"millis":0.677712,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":262832,"millis":0.262832,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":2385926,"millis":2.385926,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":421263,"millis":0.421263,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":313884,"millis":0.313884,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":471518,"millis":0.471518,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":917549,"millis":0.917549,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:46.840 [print] invalid \n"},{"result":{"nanos":614032,"millis":0.614032,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:46.840 [print] must have required property 'dimension_name' \n"},{"result":{"nanos":828980,"millis":0.82898,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:46.841 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":140232,"millis":0.140232,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":829969557,"millis":829.969557,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:46.844 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 242\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:47.670 response time in milliseconds: 822\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:47 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 220\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"dc-VvVxqkc7pUIQJHHD3mUr5r19XI4\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"dimension_name\"},\"message\":\"must have required property 'dimension_name'\"}]}\n\n"},{"result":{"nanos":17060311,"millis":17.060311,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:47.689 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"dimension_name\"\n      },\n      \"message\": \"must have required property 'dimension_name'\"\n    }\n  ]\n}\n must have required property 'dimension_name' \n"},{"result":{"nanos":450548,"millis":0.450548,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":1062028307,"millis":1062.028307,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":1031.070961,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must have required property 'dimension_name'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":5330860,"millis":5.33086,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:47.723 remove failed: null\n"},{"result":{"nanos":5046256,"millis":5.046256,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:47.728 remove failed: null\n"},{"result":{"nanos":423373,"millis":0.423373,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":417006,"millis":0.417006,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":968294249,"millis":968.294249,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:47.738 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 242\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:48.697 response time in milliseconds: 956\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:48 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 220\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"dc-VvVxqkc7pUIQJHHD3mUr5r19XI4\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"dimension_name\"},\"message\":\"must have required property 'dimension_name'\"}]}\n\n"},{"result":{"nanos":553638,"millis":0.553638,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":47793158,"millis":47.793158,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":868445,"millis":0.868445,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":928943,"millis":0.928943,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":9094399,"millis":9.094399,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":1392073,"millis":1.392073,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":347212,"millis":0.347212,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":329768,"millis":0.329768,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":12.96084,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453088732,"refId":"[3:24]","endTime":1676453088747,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":12.96084,"passedCount":1}]},{"result":{"nanos":243588,"millis":0.243588,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":238489,"millis":0.238489,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":259484,"millis":0.259484,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":1303857,"millis":1.303857,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1167003,"millis":1.167003,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":1031.070961,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453087717,"refId":"[1:3]","endTime":1676453088751,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":1918.281523,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing dimension_name ","startTime":1676453086831,"refId":"[2.11:35]","endTime":1676453088752,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":10},{"sectionIndex":1,"stepResults":[{"result":{"nanos":351264,"millis":0.351264,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":165089,"millis":0.165089,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":6547629,"millis":6.547629,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":496269,"millis":0.496269,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":282043,"millis":0.282043,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":362617,"millis":0.362617,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":361366,"millis":0.361366,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":489557,"millis":0.489557,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":426360,"millis":0.42636,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":3339559,"millis":3.339559,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:48.778 [print] invalid \n"},{"result":{"nanos":993429,"millis":0.993429,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:48.779 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":698216,"millis":0.698216,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:48.780 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \" \",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":167365,"millis":0.167365,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":2034826018,"millis":2034.826018,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:48.782 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 263\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\" \",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:50.814 response time in milliseconds: 2028\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:50 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 239\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"ef-WjVqgfs52ljvLd\/xM8jRspl4KKA\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/dimension_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/dimension_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":4348542,"millis":4.348542,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:50.819 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\/dimension_name\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/properties\/dimension_name\/shouldnotnull\",\n      \"keyword\": \"shouldnotnull\",\n      \"params\": {\n      },\n      \"message\": \"must pass \\\"shouldnotnull\\\" keyword validation\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":479990,"millis":0.47999,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":1013054265,"millis":1013.054265,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":984.684149,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":" ","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1681908,"millis":1.681908,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:50.849 remove failed: null\n"},{"result":{"nanos":6925668,"millis":6.925668,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:50.856 remove failed: null\n"},{"result":{"nanos":343601,"millis":0.343601,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":260690,"millis":0.26069,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":960972684,"millis":960.972684,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:50.866 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 263\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\" \",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:54:51.817 response time in milliseconds: 949\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:51 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 239\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"ef-WjVqgfs52ljvLd\/xM8jRspl4KKA\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/dimension_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/dimension_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":271848,"millis":0.271848,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":12278425,"millis":12.278425,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":274573,"millis":0.274573,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":153954,"millis":0.153954,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":2214989,"millis":2.214989,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":508837,"millis":0.508837,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":158835,"millis":0.158835,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":83308,"millis":0.083308,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":3.394496,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453091826,"refId":"[3:24]","endTime":1676453091830,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":3.394496,"passedCount":1}]},{"result":{"nanos":103355,"millis":0.103355,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":86018,"millis":0.086018,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":77526,"millis":0.077526,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":504290,"millis":0.50429,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1178136,"millis":1.178136,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":984.684149,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453090844,"refId":"[1:3]","endTime":1676453091833,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":3067.389578,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing dataset_name  ","startTime":1676453088760,"refId":"[2.12:35]","endTime":1676453091834,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":" ","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":11},{"sectionIndex":1,"stepResults":[{"result":{"nanos":129576,"millis":0.129576,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":78503,"millis":0.078503,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":4017905,"millis":4.017905,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":176366,"millis":0.176366,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":103498,"millis":0.103498,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":175642,"millis":0.175642,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":155163,"millis":0.155163,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":128916,"millis":0.128916,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":208305,"millis":0.208305,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":775364,"millis":0.775364,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:51.845 [print] invalid \n"},{"result":{"nanos":752151,"millis":0.752151,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:51.846 [print] must have required property 'transformer_name' \n"},{"result":{"nanos":797314,"millis":0.797314,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:51.846 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":1081748,"millis":1.081748,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":1973712821,"millis":1973.712821,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:51.851 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 227\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\"}]}\n\n14:54:53.821 response time in milliseconds: 1967\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:52 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 224\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"e0-uA2D+gy5OKwpZurg1\/DXSJ\/d7qw\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"transformer_name\"},\"message\":\"must have required property 'transformer_name'\"}]}\n\n"},{"result":{"nanos":2160476,"millis":2.160476,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:53.823 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/required\",\n      \"keyword\": \"required\",\n      \"params\": {\n        \"missingProperty\": \"transformer_name\"\n      },\n      \"message\": \"must have required property 'transformer_name'\"\n    }\n  ]\n}\n must have required property 'transformer_name' \n"},{"result":{"nanos":498766,"millis":0.498766,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":1225241915,"millis":1225.241915,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":1202.093614,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school"}]},"testcase_type":"invalid","exp_msg":"must have required property 'transformer_name'"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1584586,"millis":1.584586,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:53.845 remove failed: null\n"},{"result":{"nanos":901394,"millis":0.901394,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:53.846 remove failed: null\n"},{"result":{"nanos":325683,"millis":0.325683,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":213174,"millis":0.213174,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":1140430268,"millis":1140.430268,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:53.856 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 227\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\"}]}\n\n14:54:54.985 response time in milliseconds: 1122\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:54 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 224\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"e0-uA2D+gy5OKwpZurg1\/DXSJ\/d7qw\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\",\"schemaPath\":\"#\/properties\/pipeline\/items\/required\",\"keyword\":\"required\",\"params\":{\"missingProperty\":\"transformer_name\"},\"message\":\"must have required property 'transformer_name'\"}]}\n\n"},{"result":{"nanos":550942,"millis":0.550942,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":52255300,"millis":52.2553,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":1229734,"millis":1.229734,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":855240,"millis":0.85524,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":9029031,"millis":9.029031,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":3463179,"millis":3.463179,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":2194044,"millis":2.194044,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":754140,"millis":0.75414,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":17.525368,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453095021,"refId":"[3:24]","endTime":1676453095040,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":17.525368,"passedCount":1}]},{"result":{"nanos":526654,"millis":0.526654,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":457697,"millis":0.457697,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":495669,"millis":0.495669,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":2135104,"millis":2.135104,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":2217143,"millis":2.217143,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":1202.093614,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453093843,"refId":"[1:3]","endTime":1676453095047,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":3210.194429,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing transformer_name ","startTime":1676453091838,"refId":"[2.13:35]","endTime":1676453095050,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school"}]},"exampleIndex":12},{"sectionIndex":1,"stepResults":[{"result":{"nanos":377487,"millis":0.377487,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":216587,"millis":0.216587,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":419905,"millis":0.419905,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":421887,"millis":0.421887,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":257661,"millis":0.257661,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":405284,"millis":0.405284,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":323849,"millis":0.323849,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":849849,"millis":0.849849,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":393229,"millis":0.393229,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":852149,"millis":0.852149,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:55.065 [print] invalid \n"},{"result":{"nanos":759219,"millis":0.759219,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:55.066 [print] must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":2107958,"millis":2.107958,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:55.068 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \" \"\n    }\n  ]\n}\n \n"},{"result":{"nanos":210237,"millis":0.210237,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":904309123,"millis":904.309123,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:55.073 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 250\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\" \"}]}\n\n14:54:55.972 response time in milliseconds: 893\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:55 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 243\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"f3-3DBxyBC7bGmqf21VGTDS0yGpe6E\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/transformer_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/transformer_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":2793060,"millis":2.79306,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:54:55.976 [print] {\n  \"message\": [\n    {\n      \"instancePath\": \"\/pipeline\/0\/transformer_name\",\n      \"schemaPath\": \"#\/properties\/pipeline\/items\/properties\/transformer_name\/shouldnotnull\",\n      \"keyword\": \"shouldnotnull\",\n      \"params\": {\n      },\n      \"message\": \"must pass \\\"shouldnotnull\\\" keyword validation\"\n    }\n  ]\n}\n must pass \"shouldnotnull\" keyword validation \n"},{"result":{"nanos":843101,"millis":0.843101,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":405354726,"millis":405.354726,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":367.415482,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":" "}]},"testcase_type":"invalid","exp_msg":"must pass \"shouldnotnull\" keyword validation"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1940243,"millis":1.940243,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:54:56.014 remove failed: null\n"},{"result":{"nanos":7060349,"millis":7.060349,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:54:56.021 remove failed: null\n"},{"result":{"nanos":3655904,"millis":3.655904,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":513672,"millis":0.513672,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":319543252,"millis":319.543252,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:54:56.033 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 250\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\" \"}]}\n\n14:54:56.344 response time in milliseconds: 309\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:24:56 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 243\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"f3-3DBxyBC7bGmqf21VGTDS0yGpe6E\"\n{\"message\":[{\"instancePath\":\"\/pipeline\/0\/transformer_name\",\"schemaPath\":\"#\/properties\/pipeline\/items\/properties\/transformer_name\/shouldnotnull\",\"keyword\":\"shouldnotnull\",\"params\":{},\"message\":\"must pass \\\"shouldnotnull\\\" keyword validation\"}]}\n\n"},{"result":{"nanos":602402,"millis":0.602402,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":28834996,"millis":28.834996,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":604199,"millis":0.604199,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":720220,"millis":0.72022,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":1787028,"millis":1.787028,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":2016248,"millis":2.016248,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":616950,"millis":0.61695,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"}},{"result":{"nanos":683660,"millis":0.68366,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":6.428305,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453096368,"refId":"[3:24]","endTime":1676453096375,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":6.428305,"passedCount":1}]},{"result":{"nanos":358772,"millis":0.358772,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":402700,"millis":0.4027,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":397266,"millis":0.397266,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":2273581,"millis":2.273581,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1832345,"millis":1.832345,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":367.415482,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453096012,"refId":"[1:3]","endTime":1676453096381,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":1320.895311,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by removing transformer_name ","startTime":1676453095058,"refId":"[2.14:35]","endTime":1676453096383,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":" "}]},"exampleIndex":13},{"sectionIndex":1,"stepResults":[{"result":{"nanos":407178,"millis":0.407178,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":289993,"millis":0.289993,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":593546,"millis":0.593546,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":536597,"millis":0.536597,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":351180,"millis":0.35118,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":773825,"millis":0.773825,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":563814,"millis":0.563814,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":512707,"millis":0.512707,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":563312,"millis":0.563312,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1965781,"millis":1.965781,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:54:56.400 [print] invalid \n"},{"result":{"nanos":1656964,"millis":1.656964,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:54:56.402 [print] Invalid pipeline type \n"},{"result":{"nanos":1847678,"millis":1.847678,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:54:56.404 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_database\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":239872,"millis":0.239872,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":30047108487,"errorMessage":"http call failed after 30036 milliseconds for url: https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\njava.net.SocketException: Network is unreachable\nsrc\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature:23","millis":30047.108487,"status":"failed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:54:56.409 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 284\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_database\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:26.450 java.net.SocketException: Network is unreachable, http call failed after 30036 milliseconds for url: https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n14:55:26.458 src\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature:23\nWhen method POST\nhttp call failed after 30036 milliseconds for url: https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\njava.net.SocketException: Network is unreachable\nsrc\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature:23\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"}}],"line":35,"description":"","durationMillis":30057.410934,"failed":true,"error":"http call failed after 30036 milliseconds for url: https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\njava.net.SocketException: Network is unreachable\nsrc\/test\/java\/cqube\/SpecAPI\/spec_validator\/specPipeline.feature:23","executorName":"main","name":"Verify the Spec pipeline by providing invalid pipeline_type ","startTime":1676453096391,"refId":"[2.15:35]","endTime":1676453126458,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_database","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":14},{"sectionIndex":1,"stepResults":[{"result":{"nanos":568515,"millis":0.568515,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":819584,"millis":0.819584,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":760018,"millis":0.760018,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":639818,"millis":0.639818,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":117839,"millis":0.117839,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":200421,"millis":0.200421,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":130038,"millis":0.130038,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":106279,"millis":0.106279,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":423666,"millis":0.423666,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":964976,"millis":0.964976,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:55:26.498 [print] invalid \n"},{"result":{"nanos":1146551,"millis":1.146551,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:55:26.499 [print] Cannot find event name \n"},{"result":{"nanos":3507819,"millis":3.507819,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:55:26.502 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attend\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":123685,"millis":0.123685,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":410665890,"millis":410.66589,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:55:26.504 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 274\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attend\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:26.913 response time in milliseconds: 409\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:26 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 36\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"24-rTXbUyUmxmueTgJs50f0fnaG0Ac\"\n{\"message\":\"Cannot find event name\"}\n\n"},{"result":{"nanos":1611153,"millis":1.611153,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:55:26.914 [print] {\n  \"message\": \"Cannot find event name\"\n}\n Cannot find event name \n"},{"result":{"nanos":638483,"millis":0.638483,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":444905319,"millis":444.905319,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":437.870292,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attend","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"Cannot find event name"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":454611,"millis":0.454611,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:55:26.922 remove failed: null\n"},{"result":{"nanos":368326,"millis":0.368326,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:55:26.922 remove failed: null\n"},{"result":{"nanos":74167,"millis":0.074167,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":41742,"millis":0.041742,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":364806516,"millis":364.806516,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:55:26.924 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 274\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attend\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:27.286 response time in milliseconds: 361\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:27 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 36\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"24-rTXbUyUmxmueTgJs50f0fnaG0Ac\"\n{\"message\":\"Cannot find event name\"}\n\n"},{"result":{"nanos":2746519,"millis":2.746519,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":56804283,"millis":56.804283,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":427298,"millis":0.427298,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":464451,"millis":0.464451,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":2684943,"millis":2.684943,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":3275677,"millis":3.275677,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":26831174,"millis":26.831174,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_response1.feature","loopIndex":-1,"callDepth":3,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":9.627238,"callArg":{"actual_output":"Cannot find event name","expected_output":"Cannot find event name"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_response1","relativePath":"src\/test\/java\/cqube\/helpers\/validate_response1.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":4361115,"millis":4.361115,"status":"passed"},"step":{"line":5,"prefix":"*","index":0,"text":"print actual_output"},"stepLog":"14:55:27.335 [print] Cannot find event name \n"},{"result":{"nanos":4218558,"millis":4.218558,"status":"passed"},"step":{"line":6,"prefix":"*","index":1,"text":"print expected_output"},"stepLog":"14:55:27.340 [print] Cannot find event name \n"},{"result":{"nanos":1047565,"millis":1.047565,"status":"passed"},"step":{"line":7,"prefix":"And","index":2,"text":"match actual_output == expected_output"}}],"line":4,"description":"","durationMillis":9.627238,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453127331,"refId":"[1:4]","endTime":1676453127341,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":4972377,"millis":4.972377,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":38.65592,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453127307,"refId":"[3:24]","endTime":1676453127347,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":38.65592,"passedCount":1}]},{"result":{"nanos":1792775,"millis":1.792775,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":2227421,"millis":2.227421,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":3136819,"millis":3.136819,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":3098910,"millis":3.09891,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":2318203,"millis":2.318203,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":437.870292,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453126921,"refId":"[1:3]","endTime":1676453127360,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":867.330054,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing invalid event_name ","startTime":1676453126492,"refId":"[2.16:35]","endTime":1676453127361,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attend","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":15},{"sectionIndex":1,"stepResults":[{"result":{"nanos":134097,"millis":0.134097,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":100838,"millis":0.100838,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":208361,"millis":0.208361,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":205331,"millis":0.205331,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":173423,"millis":0.173423,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":283596,"millis":0.283596,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":192586,"millis":0.192586,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":176291,"millis":0.176291,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":220737,"millis":0.220737,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1069069,"millis":1.069069,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:55:27.367 [print] invalid \n"},{"result":{"nanos":443211,"millis":0.443211,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:55:27.367 [print] Cannot find dataset name \n"},{"result":{"nanos":488951,"millis":0.488951,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:55:27.368 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_students_attendance\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":144604,"millis":0.144604,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":335318189,"millis":335.318189,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:55:27.370 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 275\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_students_attendance\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:27.702 response time in milliseconds: 331\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:27 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 38\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"26-WpG07cwu\/k0X99KDzcHxhfUOabg\"\n{\"message\":\"Cannot find dataset name\"}\n\n"},{"result":{"nanos":1353926,"millis":1.353926,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:55:27.705 [print] {\n  \"message\": \"Cannot find dataset name\"\n}\n Cannot find dataset name \n"},{"result":{"nanos":399964,"millis":0.399964,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":555429177,"millis":555.429177,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":541.138538,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_students_attendance","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"Cannot find dataset name"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1033702,"millis":1.033702,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:55:27.718 remove failed: null\n"},{"result":{"nanos":913628,"millis":0.913628,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:55:27.719 remove failed: null\n"},{"result":{"nanos":201611,"millis":0.201611,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":163541,"millis":0.163541,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":500789830,"millis":500.78983,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:55:27.723 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 275\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_students_attendance\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:28.220 response time in milliseconds: 494\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:28 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 38\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"26-WpG07cwu\/k0X99KDzcHxhfUOabg\"\n{\"message\":\"Cannot find dataset name\"}\n\n"},{"result":{"nanos":351023,"millis":0.351023,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":32141591,"millis":32.141591,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":444247,"millis":0.444247,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":506732,"millis":0.506732,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":812023,"millis":0.812023,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":688878,"millis":0.688878,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":12949363,"millis":12.949363,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_response1.feature","loopIndex":-1,"callDepth":3,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":2.73568,"callArg":{"actual_output":"Cannot find dataset name","expected_output":"Cannot find dataset name"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_response1","relativePath":"src\/test\/java\/cqube\/helpers\/validate_response1.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":930600,"millis":0.9306,"status":"passed"},"step":{"line":5,"prefix":"*","index":0,"text":"print actual_output"},"stepLog":"14:55:28.250 [print] Cannot find dataset name \n"},{"result":{"nanos":980096,"millis":0.980096,"status":"passed"},"step":{"line":6,"prefix":"*","index":1,"text":"print expected_output"},"stepLog":"14:55:28.251 [print] Cannot find dataset name \n"},{"result":{"nanos":824984,"millis":0.824984,"status":"passed"},"step":{"line":7,"prefix":"And","index":2,"text":"match actual_output == expected_output"}}],"line":4,"description":"","durationMillis":2.73568,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453128249,"refId":"[1:4]","endTime":1676453128252,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":445030,"millis":0.44503,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":15.846273,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453128237,"refId":"[3:24]","endTime":1676453128253,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":15.846273,"passedCount":1}]},{"result":{"nanos":304692,"millis":0.304692,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":624324,"millis":0.624324,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":661540,"millis":0.66154,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":2494944,"millis":2.494944,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1458112,"millis":1.458112,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":541.138538,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453127717,"refId":"[1:3]","endTime":1676453128260,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":896.342351,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing invalid dataset_name ","startTime":1676453127363,"refId":"[2.17:35]","endTime":1676453128261,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_students_attendance","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":16},{"sectionIndex":1,"stepResults":[{"result":{"nanos":410851,"millis":0.410851,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":260032,"millis":0.260032,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":569124,"millis":0.569124,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":534099,"millis":0.534099,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":319225,"millis":0.319225,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":603670,"millis":0.60367,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":980062,"millis":0.980062,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":1656191,"millis":1.656191,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":576143,"millis":0.576143,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":2937450,"millis":2.93745,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:55:28.280 [print] invalid \n"},{"result":{"nanos":1039113,"millis":1.039113,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:55:28.282 [print] Cannot find dimension name \n"},{"result":{"nanos":2184588,"millis":2.184588,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:55:28.284 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school.py\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":1670831,"millis":1.670831,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":436604241,"millis":436.604241,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:55:28.293 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 271\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:28.723 response time in milliseconds: 428\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:28 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 40\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"28-UidSQa5ztPKNKdBKFyn3iwyPZVU\"\n{\"message\":\"Cannot find dimension name\"}\n\n"},{"result":{"nanos":394568,"millis":0.394568,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:55:28.723 [print] {\n  \"message\": \"Cannot find dimension name\"\n}\n Cannot find dimension name \n"},{"result":{"nanos":77214,"millis":0.077214,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":324453991,"millis":324.453991,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":318.999337,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"testcase_type":"invalid","exp_msg":"Cannot find dimension name"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":312497,"millis":0.312497,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:55:28.727 remove failed: null\n"},{"result":{"nanos":200062,"millis":0.200062,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:55:28.727 remove failed: null\n"},{"result":{"nanos":49082,"millis":0.049082,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":36432,"millis":0.036432,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":280054041,"millis":280.054041,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:55:28.729 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 271\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school.py\"}]}\n\n14:55:29.007 response time in milliseconds: 276\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:28 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 40\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"28-UidSQa5ztPKNKdBKFyn3iwyPZVU\"\n{\"message\":\"Cannot find dimension name\"}\n\n"},{"result":{"nanos":409267,"millis":0.409267,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":34088523,"millis":34.088523,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":614085,"millis":0.614085,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":551885,"millis":0.551885,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":928394,"millis":0.928394,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":1044381,"millis":1.044381,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":15128364,"millis":15.128364,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_response1.feature","loopIndex":-1,"callDepth":3,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":3.763099,"callArg":{"actual_output":"Cannot find dimension name","expected_output":"Cannot find dimension name"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_response1","relativePath":"src\/test\/java\/cqube\/helpers\/validate_response1.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1657901,"millis":1.657901,"status":"passed"},"step":{"line":5,"prefix":"*","index":0,"text":"print actual_output"},"stepLog":"14:55:29.039 [print] Cannot find dimension name \n"},{"result":{"nanos":1394292,"millis":1.394292,"status":"passed"},"step":{"line":6,"prefix":"*","index":1,"text":"print expected_output"},"stepLog":"14:55:29.040 [print] Cannot find dimension name \n"},{"result":{"nanos":710906,"millis":0.710906,"status":"passed"},"step":{"line":7,"prefix":"And","index":2,"text":"match actual_output == expected_output"}}],"line":4,"description":"","durationMillis":3.763099,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453129037,"refId":"[1:4]","endTime":1676453129041,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":569806,"millis":0.569806,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":18.836915,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453129023,"refId":"[3:24]","endTime":1676453129042,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":18.836915,"passedCount":1}]},{"result":{"nanos":344344,"millis":0.344344,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":279122,"millis":0.279122,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":289312,"millis":0.289312,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":1628100,"millis":1.6281,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1308555,"millis":1.308555,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":318.999337,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453128727,"refId":"[1:3]","endTime":1676453129047,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":775.271393,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing invalid dimension_name ","startTime":1676453128270,"refId":"[2.18:35]","endTime":1676453129048,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension","transformer_name":"SAC_stds_atd_cmp_by_school.py"}]},"exampleIndex":17},{"sectionIndex":1,"stepResults":[{"result":{"nanos":322018,"millis":0.322018,"status":"passed"},"step":{"line":10,"prefix":"Given","index":0,"text":"url \"https:\/\/cqube-qa.tibilprojects.com\/\""}},{"result":{"nanos":211262,"millis":0.211262,"status":"passed"},"step":{"line":11,"prefix":"Given","index":1,"text":"path '\/spec\/pipeline'"}},{"result":{"nanos":414830,"millis":0.41483,"status":"passed"},"step":{"line":12,"prefix":"*","index":2,"text":"def testcase_type = __row.testcase_type"}},{"result":{"nanos":420259,"millis":0.420259,"status":"passed"},"step":{"line":13,"prefix":"*","index":3,"text":"def exp_msg = __row.message"}},{"result":{"nanos":242735,"millis":0.242735,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def req_json = __row"}},{"result":{"nanos":497526,"millis":0.497526,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"remove __row.scenario"}},{"result":{"nanos":420956,"millis":0.420956,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"remove req_json.message"}},{"result":{"nanos":367998,"millis":0.367998,"status":"passed"},"step":{"line":17,"prefix":"*","index":7,"text":"remove req_json.testcase_type"}},{"result":{"nanos":405222,"millis":0.405222,"status":"passed"},"step":{"line":18,"prefix":"*","index":8,"text":"def api_url = \"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\""}},{"result":{"nanos":1642367,"millis":1.642367,"status":"passed"},"step":{"line":19,"prefix":"*","index":9,"text":"print testcase_type"},"stepLog":"14:55:29.060 [print] invalid \n"},{"result":{"nanos":1400668,"millis":1.400668,"status":"passed"},"step":{"line":20,"prefix":"*","index":10,"text":"print exp_msg"},"stepLog":"14:55:29.062 [print] Transformer not found \n"},{"result":{"nanos":1712535,"millis":1.712535,"status":"passed"},"step":{"line":21,"prefix":"*","index":11,"text":"print req_json"},"stepLog":"14:55:29.064 [print] {\n  \"pipeline_name\": \"students_attendance_compliance_by_school\",\n  \"pipeline_type\": \"ingest_to_db\",\n  \"pipeline\": [\n    {\n      \"event_name\": \"event_students_attendance\",\n      \"dataset_name\": \"SAC_stds_atd_cmp_by_school\",\n      \"dimension_name\": \"dimension_school\",\n      \"transformer_name\": \"SAC_stds_atd_cmp_by_school\"\n    }\n  ]\n}\n \n"},{"result":{"nanos":292824,"millis":0.292824,"status":"passed"},"step":{"line":22,"prefix":"And","index":12,"text":"request req_json"}},{"result":{"nanos":305089707,"millis":305.089707,"status":"passed"},"step":{"line":23,"prefix":"When","index":13,"text":"method POST"},"stepLog":"14:55:29.075 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 275\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school\"}]}\n\n14:55:29.369 response time in milliseconds: 292\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:29 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 35\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"23-OeG5quiA82+Wzd2IsZLdA9J9PlU\"\n{\"message\":\"Transformer not found\"}\n\n"},{"result":{"nanos":3069053,"millis":3.069053,"status":"passed"},"step":{"line":24,"prefix":"*","index":14,"text":"print response , exp_msg"},"stepLog":"14:55:29.373 [print] {\n  \"message\": \"Transformer not found\"\n}\n Transformer not found \n"},{"result":{"nanos":421083,"millis":0.421083,"status":"passed"},"step":{"line":30,"prefix":"*","index":15,"text":"if (testcase_type == null && exp_msg == null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_basic_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json})"}},{"result":{"nanos":381819990,"millis":381.81999,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"if (testcase_type != null && exp_msg != null) karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@validate',{\"api_url\":api_url,\"request_body\":req_json,\"testcase_type\":testcase_type,\"exp_msg\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":361.021227,"callArg":{"api_url":"https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline","request_body":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school"}]},"testcase_type":"invalid","exp_msg":"Transformer not found"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2275318,"millis":2.275318,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"remove req_json.message"},"stepLog":"14:55:29.394 remove failed: null\n"},{"result":{"nanos":1829271,"millis":1.829271,"status":"passed"},"step":{"line":5,"prefix":"*","index":1,"text":"remove req_json.testcase_type"},"stepLog":"14:55:29.396 remove failed: null\n"},{"result":{"nanos":318274,"millis":0.318274,"status":"passed"},"step":{"line":6,"prefix":"Given","index":2,"text":"url api_url"}},{"result":{"nanos":201368,"millis":0.201368,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"request req_json"}},{"result":{"nanos":312819601,"millis":312.819601,"status":"passed"},"step":{"line":8,"prefix":"When","index":4,"text":"method POST"},"stepLog":"14:55:29.400 request:\n1 > POST https:\/\/cqube-qa.tibilprojects.com\/spec\/pipeline\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 275\n1 > Host: cqube-qa.tibilprojects.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.6)\n1 > Accept-Encoding: gzip,deflate\n{\"pipeline_name\":\"students_attendance_compliance_by_school\",\"pipeline_type\":\"ingest_to_db\",\"pipeline\":[{\"event_name\":\"event_students_attendance\",\"dataset_name\":\"SAC_stds_atd_cmp_by_school\",\"dimension_name\":\"dimension_school\",\"transformer_name\":\"SAC_stds_atd_cmp_by_school\"}]}\n\n14:55:29.709 response time in milliseconds: 306\n1 < 400\n1 < Server: nginx\/1.18.0 (Ubuntu)\n1 < Date: Wed, 15 Feb 2023 09:25:29 GMT\n1 < Content-Type: application\/json; charset=utf-8\n1 < Content-Length: 35\n1 < Connection: keep-alive\n1 < X-Powered-By: Express\n1 < ETag: W\/\"23-OeG5quiA82+Wzd2IsZLdA9J9PlU\"\n{\"message\":\"Transformer not found\"}\n\n"},{"result":{"nanos":420827,"millis":0.420827,"status":"passed"},"step":{"line":9,"prefix":"*","index":5,"text":"if (responseStatus == 200 && testcase_type == \"valid\")  karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@valid_api')"}},{"result":{"nanos":38676692,"millis":38.676692,"status":"passed"},"step":{"line":10,"prefix":"*","index":6,"text":"if (responseStatus == 400 && testcase_type == \"invalid\") karate.call('classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature@invalid_api')"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","packageQualifiedName":"src.test.java.cqube.helpers.validate_datadriven_api","loopIndex":-1,"relativePath":"src\/test\/java\/cqube\/helpers\/validate_datadriven_api.feature","scenarioResults":[{"sectionIndex":2,"stepResults":[{"result":{"nanos":477401,"millis":0.477401,"status":"passed"},"step":{"endLine":30,"line":25,"prefix":"*","docString":"{\n    \"message\": \"#string\"\n}","index":0,"text":"def resp1 ="}},{"result":{"nanos":506376,"millis":0.506376,"status":"passed"},"step":{"endLine":46,"line":31,"prefix":"*","docString":"{\n    \"message\": [\n        {\n            \"instancePath\": \"#ignore\",\n            \"schemaPath\": \"#ignore\",\n            \"keyword\": \"#ignore\",\n            \"params\": {\n                \"type\": \"#string\"\n            },\n            \"message\": \"#string\"\n        }\n    ]\n}","index":1,"text":"def resp2 ="}},{"result":{"nanos":881763,"millis":0.881763,"status":"passed"},"step":{"line":47,"prefix":"*","index":2,"text":"def result1 =  karate.match(response,resp1)"}},{"result":{"nanos":1001836,"millis":1.001836,"status":"passed"},"step":{"line":48,"prefix":"*","index":3,"text":"def result2 = karate.match(response,resp2)"}},{"result":{"nanos":17988185,"millis":17.988185,"status":"passed"},"step":{"line":49,"prefix":"*","index":4,"text":"if (result1.pass == true) karate.call('validate_response1.feature@validate',{\"actual_output\":response.message,\"expected_output\":exp_msg})"},"callResults":[{"prefixedPath":"classpath:src\/test\/java\/cqube\/helpers\/validate_response1.feature","loopIndex":-1,"callDepth":3,"description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":2.741623,"callArg":{"actual_output":"Transformer not found","expected_output":"Transformer not found"},"failedCount":0,"packageQualifiedName":"src.test.java.cqube.helpers.validate_response1","relativePath":"src\/test\/java\/cqube\/helpers\/validate_response1.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1019782,"millis":1.019782,"status":"passed"},"step":{"line":5,"prefix":"*","index":0,"text":"print actual_output"},"stepLog":"14:55:29.746 [print] Transformer not found \n"},{"result":{"nanos":1108454,"millis":1.108454,"status":"passed"},"step":{"line":6,"prefix":"*","index":1,"text":"print expected_output"},"stepLog":"14:55:29.747 [print] Transformer not found \n"},{"result":{"nanos":613387,"millis":0.613387,"status":"passed"},"step":{"line":7,"prefix":"And","index":2,"text":"match actual_output == expected_output"}}],"line":4,"description":"","durationMillis":2.741623,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453129745,"refId":"[1:4]","endTime":1676453129748,"exampleIndex":-1}],"name":"","passedCount":1}]},{"result":{"nanos":450742,"millis":0.450742,"status":"passed"},"step":{"line":50,"prefix":"*","index":5,"text":"if (result2.pass == true) karate.call('validate_response2.feature@validate',{\"actual_output\":response.message[0].message,\"expected_output\":exp_msg})"}}],"line":24,"description":"","durationMillis":21.306303,"failed":false,"tags":["invalid_api","ignore"],"executorName":"main","name":"Check invalid response","startTime":1676453129727,"refId":"[3:24]","endTime":1676453129749,"exampleIndex":-1}],"callDepth":2,"name":"","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":21.306303,"passedCount":1}]},{"result":{"nanos":315922,"millis":0.315922,"status":"passed"},"step":{"line":11,"prefix":"*","index":7,"text":"if (responseStatus == 200 && testcase_type == \"invalid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":588365,"millis":0.588365,"status":"passed"},"step":{"line":12,"prefix":"*","index":8,"text":"if (responseStatus == 400 && testcase_type == \"valid\") karate.fail('Expected result is not matched with actual result')"}},{"result":{"nanos":389625,"millis":0.389625,"status":"passed"},"step":{"line":13,"prefix":"*","index":9,"text":"if (responseStatus == 500 || responseStatus == 501 || responseStatus == 502 || responseStatus == 503 || responseStatus == 504 ) karate.fail('Server error')"}},{"result":{"nanos":1923933,"millis":1.923933,"status":"passed"},"step":{"line":14,"prefix":"*","index":10,"text":"match karate.range(201,300) !contains responseStatus"}},{"result":{"nanos":1262031,"millis":1.262031,"status":"passed"},"step":{"line":15,"prefix":"*","index":11,"text":"match karate.range(401,451) !contains responseStatus"}}],"line":3,"description":"","durationMillis":361.021227,"failed":false,"tags":["ignore","validate"],"executorName":"main","name":"","startTime":1676453129391,"refId":"[1:3]","endTime":1676453129754,"exampleIndex":-1}],"name":"","passedCount":1}]}],"line":35,"description":"","durationMillis":698.751033,"failed":false,"executorName":"main","name":"Verify the Spec pipeline by providing invalid  transformer_name ","startTime":1676453129054,"refId":"[2.19:35]","endTime":1676453129755,"exampleData":{"pipeline_name":"students_attendance_compliance_by_school","pipeline_type":"ingest_to_db","pipeline":[{"event_name":"event_students_attendance","dataset_name":"SAC_stds_atd_cmp_by_school","dimension_name":"dimension_school","transformer_name":"SAC_stds_atd_cmp_by_school"}]},"exampleIndex":18}],"callDepth":0,"name":"Test Spec Pipeline API","description":"","resultDate":"2023-02-15 02:55:29 pm","durationMillis":65290.34407,"passedCount":18}